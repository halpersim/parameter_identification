function tmpreturn = conservative_forces(q, q_p, theta, param)
  m = [0 0 0 0 0 0 0 0 0 0 0 0 0 0;];
  t1 = sin(param.roll);
  t3 = q(6);
  t4 = cos(t3);
  t5 = q(7);
  t6 = cos(t5);
  t8 = sin(t5);
  t9 = param.MY7 * t8;
  t10 = -param.MX7 * t6 + param.MX6 + t9;
  t11 = t10 * t4;
  t12 = sin(t3);
  t13 = t12 * param.MYR6;
  t14 = t11 - t13 + param.MX5;
  t15 = q(5);
  t16 = cos(t15);
  t17 = t16 * t14;
  t18 = sin(t15);
  t19 = param.MX7 * t8;
  t21 = param.MY7 * t6 - param.MYR5 + t19;
  t24 = q(4);
  t25 = cos(t24);
  t27 = t4 * param.MYR6;
  t29 = t10 * t12 + param.MYR4 + t27;
  t30 = sin(t24);
  t32 = t25 * (t18 * t21 - param.MX4 + t17) + t30 * t29 - param.MX3;
  t33 = q(3);
  t34 = cos(t33);
  t37 = -t10;
  t39 = t37 * t4 - param.MX5 + t13;
  t41 = t16 * t21 + t18 * t39 + param.MYR3;
  t42 = sin(t33);
  t45 = q(2);
  t46 = cos(t45);
  t48 = sin(t45);
  t49 = t48 * t29;
  t51 = t48 * t30;
  t53 = -t21;
  t54 = t18 * t53;
  t59 = t46 * (t32 * t34 + t41 * t42 + param.MX2) - t49 * t25 + t17 * t51 - t30 * t48 * (t54 + param.MX4) - t48 * param.MYR2 - param.MX1;
  t60 = q(1);
  t61 = cos(t60);
  t65 = t16 * t39 + param.MX4 + t54;
  t66 = t25 * t65;
  t70 = t66 + t30 * (t12 * t37 - param.MYR4 - t27) + param.MX3;
  t73 = sin(t60);
  t76 = cos(param.pitch);
  t81 = t14 * t18 + t16 * t53 - param.MYR3;
  t89 = sin(param.pitch);
  t92 = -theta(1) + t60;
  m(1,1) = -t76 * (t59 * t61 + t73 * (t34 * t41 + t42 * t70 + param.MY1 + param.MZ2)) * t1 * param.g - t89 * (t61 * (t32 * t42 + t34 * t81 - param.MY1 - param.MZ2) + t59 * t73) * param.g + t92 * param.K__1 + param.beta * q_p(1);
  t99 = cos(param.roll);
  t106 = t21 * t42;
  t107 = t16 * t106;
  t108 = t18 * t42;
  t109 = t11 * t108;
  t112 = t18 * (-t13 + param.MX5) * t42;
  t113 = param.MYR3 * t42;
  t114 = -t107 + t109 + t112 - t113 - param.MX2;
  t134 = t89 * param.g;
  t147 = -theta(2) + t45;
  m(1,2) = -t76 * (t48 * (t1 * t34 * t70 * t73 + t1 * t114 * t73 + t25 * t29 * t99 + t30 * t65 * t99 + param.MYR2 * t99) + (-t1 * t25 * t29 * t73 - t1 * t30 * t65 * t73 - param.MYR2 * t1 * t73 + t34 * t70 * t99 + t114 * t99) * t46) * param.g + t48 * (t34 * t70 - param.MX2 - t107 + t109 + t112 - t113) * t61 * t134 - t46 * (t25 * t29 + t30 * t65 + param.MYR2) * t61 * t134 + t147 * param.K__2 + param.beta * q_p(2);
  t161 = t66 - t30 * t27 + param.MX7 * t30 * t12 * t6 + t30 * (t12 * (-t9 - param.MX6) - param.MYR4) + param.MX3;
  t170 = t73 * t81;
  t193 = -theta(3) + t33;
  m(1,3) = t76 * (t42 * (t1 * (-t161 * t46 * t73 + t61 * t81) + t161 * t99 * t48) + t34 * (t1 * (t161 * t61 + t170 * t46) - t99 * t48 * t81)) * param.g + t42 * (t161 * t46 * t61 + t170) * t134 + t34 * (-t46 * t61 * t81 + t161 * t73) * t134 + t193 * param.K__3 + param.beta * q_p(3);
  t201 = t17 + param.MY7 * t6 * t18 + t18 * (t19 - param.MYR5) - param.MX4;
  t202 = t201 * t42;
  t204 = t34 * t201;
  t206 = t204 * t46 - t49;
  t221 = t29 * t34 * t46 + t201 * t48;
  t249 = -theta(4) + t24;
  m(1,4) = t76 * (t30 * (t1 * (t202 * t61 + t206 * t73) - t99 * (t204 * t48 + t29 * t46)) - t25 * (t1 * (t29 * t42 * t61 + t221 * t73) + t99 * (-t29 * t34 * t48 + t201 * t46))) * param.g - t30 * t89 * (-t202 * t73 + t206 * t61) * param.g + t25 * t89 * (-t29 * t42 * t73 + t221 * t61) * param.g + t249 * param.K__4 + param.beta * q_p(4);
  t254 = t42 * t14;
  t255 = t25 * t254;
  t260 = t14 * t25 * t34 + t106;
  t262 = t30 * t14;
  t264 = t260 * t46 + t262 * t48;
  t277 = t21 * t25 * t42 + t14 * t34;
  t281 = -t21 * t25 * t34 + t254;
  t284 = -t21 * t51 + t281 * t46;
  t312 = -theta(5) + t15;
  m(1,5) = -t76 * (t18 * (t1 * (t61 * (t21 * t34 - t255) - t264 * t73) - (-t260 * t48 + t262 * t46) * t99) + t16 * (t1 * (t277 * t61 - t284 * t73) + (t21 * t30 * t46 + t281 * t48) * t99)) * param.g - t18 * t89 * (t61 * t264 - (t34 * t53 + t255) * t73) * param.g - t16 * (t277 * t73 + t284 * t61) * t134 + t312 * param.K__5 + param.beta * q_p(5);
  t321 = t16 * t25 * t37 - param.MYR6 * t30;
  t323 = t18 * t34 * t37 + t321 * t42;
  t327 = -t108 * t37 + t321 * t34;
  t332 = t16 * t30 * t37 + param.MYR6 * t25;
  t334 = t327 * t46 + t332 * t48;
  t346 = t16 * param.MYR6;
  t349 = t25 * t346 + t30 * t37;
  t351 = param.MYR6 * t18 * t34 + t349 * t42;
  t356 = -param.MYR6 * t18 * t42 + t34 * t349;
  t360 = t25 * t37 - t30 * t346;
  t362 = t356 * t46 - t360 * t48;
  t387 = -theta(6) + t3;
  m(1,6) = -t76 * param.g * (t12 * (t1 * (t323 * t61 + t334 * t73) + (-t327 * t48 + t332 * t46) * t99) - t4 * (t1 * (t351 * t61 + t362 * t73) - (t356 * t48 + t360 * t46) * t99)) + t12 * t89 * (-t323 * t73 + t334 * t61) * param.g - t4 * (-t351 * t73 + t362 * t61) * t134 + t387 * param.K__6 + param.beta * q_p(6);
  t394 = param.MY7 * t18 * t4 - param.MX7 * t16;
  t396 = t16 * t4;
  t399 = param.MX7 * t18 + param.MY7 * t396;
  t403 = param.MY7 * t12 * t30 + t25 * t399;
  t405 = t34 * t394 + t403 * t42;
  t409 = t34 * t403 - t394 * t42;
  t414 = param.MY7 * t12 * t25 - t30 * t399;
  t416 = t409 * t46 - t414 * t48;
  t429 = param.MX7 * t18 * t4 + param.MY7 * t16;
  t433 = -param.MX7 * t396 + param.MY7 * t18;
  t437 = -param.MX7 * t12 * t30 + t25 * t433;
  t439 = t34 * t429 - t42 * t437;
  t443 = t34 * t437 + t42 * t429;
  t448 = param.MX7 * t12 * t25 + t30 * t433;
  t450 = t443 * t46 + t448 * t48;
  t474 = -theta(7) + t5;
  m(1,7) = -t76 * (t6 * (t1 * (t405 * t61 + t416 * t73) - (t409 * t48 + t414 * t46) * t99) + (t1 * (t439 * t61 - t450 * t73) - t99 * (-t443 * t48 + t448 * t46)) * t8) * param.g + t6 * (-t405 * t73 + t416 * t61) * t134 - t8 * (t439 * t73 + t450 * t61) * t134 + t474 * param.K__7 + param.beta * q_p(7);
  m(1,8) = -t92 * param.K__1;
  m(1,9) = -t147 * param.K__2;
  m(1,10) = -t193 * param.K__3;
  m(1,11) = -t249 * param.K__4;
  m(1,12) = -t312 * param.K__5;
  m(1,13) = -t387 * param.K__6;
  m(1,14) = -t474 * param.K__7;
  tmpreturn = m';
